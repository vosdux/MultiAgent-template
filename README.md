# ü§ñ –ú—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å LangGraph –∏ GigaChat

–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º LangGraph, GigaChat –∏ Langfuse –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–∞ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö AI-–∞–≥–µ–Ω—Ç–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, –∞–Ω–∞–ª–∏–∑–∞ –∏ —É–ª—É—á—à–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞. –ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–≤–æ—é —É–Ω–∏–∫–∞–ª—å–Ω—É—é —Ä–æ–ª—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞.

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –ü–æ—Ç–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
```
üìä –ê–Ω–∞–ª–∏—Ç–∏–∫ ‚Üí ‚úçÔ∏è –ü–∏—Å–∞—Ç–µ–ª—å ‚Üí üîç –ö—Ä–∏—Ç–∏–∫ ‚Üí üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã ‚Üí ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ
                  ‚Üë              ‚Üì
                  ‚Üê‚îÄ‚îÄ‚îÄ (–∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ)
```

### –ê–≥–µ–Ω—Ç—ã

1. **üìä –ê–Ω–∞–ª–∏—Ç–∏–∫** - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–º—É –∏ —Å–æ–∑–¥–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–∞–±–æ—Ç—ã
2. **‚úçÔ∏è –ü–∏—Å–∞—Ç–µ–ª—å** - —Å–æ–∑–¥–∞–µ—Ç –∏ –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ —É–ª—É—á—à–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫—Ä–∏—Ç–∏–∫–∏
3. **üîç –ö—Ä–∏—Ç–∏–∫** - –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ –∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –æ –¥–æ—Ä–∞–±–æ—Ç–∫–µ
4. **üîß –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** - –æ—Ç–¥–µ–ª—å–Ω–∞—è –Ω–æ–¥–∞, –∫–æ—Ç–æ—Ä–∞—è –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **üîÑ –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ** - –∫—Ä–∏—Ç–∏–∫ –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç –æ–±—Ä–∞—Ç–Ω–æ –∫ –ø–∏—Å–∞—Ç–µ–ª—é (–¥–æ 3 —Ä–∞–∑)
- **üéØ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑** - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º —ç—Ç–∞–ø–µ
- **üìà Langfuse –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –ø–æ–ª–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **‚ö° Optimized Flow** - —É–±—Ä–∞–Ω –∏–∑–±—ã—Ç–æ—á–Ω—ã–π –∞–≥–µ–Ω—Ç-—Ñ–∏–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

- **üìä analyze_text** - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–∞:
  - üìù –ü–æ–¥—Å—á–µ—Ç —Å–ª–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
  - ‚è∞ –í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ –∞–Ω–∞–ª–∏–∑–∞
  - üìä –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  - üéØ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–æ–≥–∞—â–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### üß† –û—Ç–¥–µ–ª—å–Ω–∞—è –Ω–æ–¥–∞ –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

–ù–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **–∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥**:

- **üîß –û—Ç–¥–µ–ª—å–Ω–∞—è –Ω–æ–¥–∞** - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—ã–¥–µ–ª–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —É–∑–µ–ª –≥—Ä–∞—Ñ–∞
- **‚úÖ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ** - –≤—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è –∫—Ä–∏—Ç–∏–∫–∞
- **‚ö° –ü—Ä—è–º–æ–π –≤—ã–∑–æ–≤** - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –±–µ–∑ LLM –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–∞
- **üìä –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–Ω—Ç
- **üõ°Ô∏è Fallback –∑–∞—â–∏—Ç–∞** - —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- API –∫–ª—é—á GigaChat

### –ß—Ç–æ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã —Å–º–æ–∂–µ—Ç–µ:
- üéØ –°–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å –ø–æ–º–æ—â—å—é AI-–∞–≥–µ–Ω—Ç–æ–≤
- üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ Langfuse
- üîÑ –°–æ—Ö—Ä–∞–Ω—è—Ç—å –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Å–µ—Å—Å–∏–∏ —Ä–∞–±–æ—Ç—ã
- üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –æ–±–æ–≥–∞—â–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

![–ü—Ä–∏–º–µ—Ä —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ –≤ Langfuse](langfuse.png)

*–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏*

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**
```bash
git clone <repository-url>
cd AI-Agent
```

2. **–°–æ–∑–¥–∞–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ**
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate  # Windows
```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
```bash
pip install -r requirements.txt
```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ Langfuse (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**
–î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º—ã —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Langfuse:

**–í–∞—Ä–∏–∞–Ω—Ç –ê: Self-hosted —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ**
```bash
# –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π Langfuse
git clone https://github.com/langfuse/langfuse.git
cd langfuse

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å –ø–æ–º–æ—â—å—é Docker Compose
docker compose up

# –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000 –∏ —Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ API –∫–ª—é—á–∏ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ–µ–∫—Ç–∞
```

**–í–∞—Ä–∏–∞–Ω—Ç –ë: –û–±–ª–∞—á–Ω–∞—è –≤–µ—Ä—Å–∏—è**
- –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://cloud.langfuse.com
- –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ API –∫–ª—é—á–∏

5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `config.env`:
```env
# GigaChat API credentials
GIGACHAT_API_KEY=your_gigachat_api_key_here

# Langfuse monitoring configuration (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
LANGFUSE_PUBLIC_KEY=your_langfuse_public_key
LANGFUSE_SECRET_KEY=your_langfuse_secret_key
LANGFUSE_HOST=http://localhost:3000
```

6. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É**
```bash
python agents.py
```

## üèõÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
AI-Agent/
‚îú‚îÄ‚îÄ agents.py                    # –û—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–≥–µ–Ω—Ç–æ–≤ —Å –æ—Ç–¥–µ–ª—å–Ω–æ–π –Ω–æ–¥–æ–π –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ config.env                   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ requirements.txt             # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)
‚îú‚îÄ‚îÄ langfuse.png                # –°–∫—Ä–∏–Ω—à–æ—Ç –ø—Ä–∏–º–µ—Ä–∞ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏
‚îú‚îÄ‚îÄ .vscode/                    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ VS Code
‚îÇ   ‚îî‚îÄ‚îÄ settings.json
‚îî‚îÄ‚îÄ venv/                       # –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```

### –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã

- **`agents.py`** - –°–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –ª–æ–≥–∏–∫—É —Å–∏—Å—Ç–µ–º—ã:
  - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–æ–≤ (–∞–Ω–∞–ª–∏—Ç–∏–∫, –ø–∏—Å–∞—Ç–µ–ª—å, –∫—Ä–∏—Ç–∏–∫)
  - –û—Ç–¥–µ–ª—å–Ω–∞—è –Ω–æ–¥–∞ –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
  - –£—Å–ª–æ–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –∏ –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Langfuse
  - Fallback –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

- **`config.env`** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:
  - API –∫–ª—é—á–∏ GigaChat –∏ Langfuse
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö–æ—Å—Ç–∞ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤
```python
def create_custom_agent():
    """–°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞–≥–µ–Ω—Ç–∞"""
    def custom_agent(state: AgentState) -> AgentState:
        # –õ–æ–≥–∏–∫–∞ –∞–≥–µ–Ω—Ç–∞
        return state
    return custom_agent

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≥—Ä–∞—Ñ
workflow.add_node("custom", create_custom_agent())
workflow.add_edge("previous_agent", "custom")
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

**–í–∞—Ä–∏–∞–Ω—Ç 1: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –Ω–æ–¥—ã**
```python
# –í —Ñ—É–Ω–∫—Ü–∏–∏ analyze_text_node –¥–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
@tool
def custom_analysis_tool(text: str) -> str:
    """–ö–∞—Å—Ç–æ–º–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞"""
    # –í–∞—à–∞ –ª–æ–≥–∏–∫–∞
    return f"–ö–∞—Å—Ç–æ–º–Ω—ã–π –∞–Ω–∞–ª–∏–∑: {text}"

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –≤ analyze_text_node
custom_result = custom_analysis_tool.invoke({"text": text_to_analyze})
```

**–í–∞—Ä–∏–∞–Ω—Ç 2: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –Ω–æ–¥—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤**
```python
def create_custom_tools_node():
    @tool
    def custom_tool(param: str) -> str:
        """–û–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞"""
        return f"–†–µ–∑—É–ª—å—Ç–∞—Ç: {param}"
    
    def custom_tools_agent(state: AgentState) -> AgentState:
        result = custom_tool.invoke({"param": state["content"]})
        state["custom_results"] = result
        return state
    
    return custom_tools_agent

# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≥—Ä–∞—Ñ –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–∞—è –Ω–æ–¥–∞
workflow.add_node("custom_tools", create_custom_tools_node())
workflow.add_edge("tools", "custom_tools")
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤
```python
prompt = ChatPromptTemplate.from_messages([
    ("system", "–í–∞—à –∫–∞—Å—Ç–æ–º–Ω—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç"),
    ("user", "–í–∞—à –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ–º–ø—Ç: {variable}")
])
```

## üìä –ü—Ä–∏–º–µ—Ä—ã –≤—ã–≤–æ–¥–∞

### –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `python agents.py` –≤—ã —É–≤–∏–¥–∏—Ç–µ:

```
üöÄ –ó–∞–ø—É—Å–∫ –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã...
üìù –¢–µ–º–∞: –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏
--------------------------------------------------
üìä Langfuse —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞
üåê Langfuse Host: http://localhost:3000
--------------------------------------------------

DEBUG: –ê–Ω–∞–ª–∏—Ç–∏–∫ –Ω–∞—á–∞–ª —Ä–∞–±–æ—Ç—É
DEBUG: –ê–Ω–∞–ª–∏—Ç–∏–∫ –ø–æ–ª—É—á–∏–ª –æ—Ç–≤–µ—Ç –¥–ª–∏–Ω–æ–π 3781 —Å–∏–º–≤–æ–ª–æ–≤
DEBUG: –ê–Ω–∞–ª–∏—Ç–∏–∫ –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É

DEBUG: –ü–∏—Å–∞—Ç–µ–ª—å –Ω–∞—á–∞–ª —Ä–∞–±–æ—Ç—É
DEBUG: –ü–∏—Å–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
DEBUG: –ü–∏—Å–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∏–ª –æ—Ç–≤–µ—Ç –¥–ª–∏–Ω–æ–π 5439 —Å–∏–º–≤–æ–ª–æ–≤
DEBUG: –ü–∏—Å–∞—Ç–µ–ª—å –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É

DEBUG: –ö—Ä–∏—Ç–∏–∫ –Ω–∞—á–∞–ª —Ä–∞–±–æ—Ç—É
DEBUG: –ö—Ä–∏—Ç–∏–∫ —Ä–µ—à–∏–ª, —á—Ç–æ –∫–æ–Ω—Ç–µ–Ω—Ç –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å
DEBUG: –ö—Ä–∏—Ç–∏–∫ –∑–∞–≤–µ—Ä—à–∏–ª —Ä–∞–±–æ—Ç—É

DEBUG: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É –ø–∏—Å–∞—Ç–µ–ª—é (–∏—Ç–µ—Ä–∞—Ü–∏—è 1/3)
DEBUG: –ü–∏—Å–∞—Ç–µ–ª—å –¥–æ—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫—Ä–∏—Ç–∏–∫–∏ (–∏—Ç–µ—Ä–∞—Ü–∏—è 1)
[... –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ ...]

DEBUG: –î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç –¥–æ—Ä–∞–±–æ—Ç–æ–∫ (3), –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º
DEBUG: –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—Å—Ç–∞ —Å –ø–æ–º–æ—â—å—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞
DEBUG: –ö–æ–Ω—Ç–µ–Ω—Ç –æ–±–æ–≥–∞—â–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ –∞–Ω–∞–ª–∏–∑–∞

üìä –ê–ù–ê–õ–ò–ó:
## –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–º—ã...

‚úçÔ∏è –ö–û–ù–¢–ï–ù–¢:
# –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç –≤ –°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏...

üîç –ö–†–ò–¢–ò–ö–ê:
–í–∞—à —Ç–µ–∫—Å—Ç —è–≤–ª—è–µ—Ç—Å—è —Ö–æ—Ä–æ—à–∏–º –≤–≤–µ–¥–µ–Ω–∏–µ–º –≤ —Ç–µ–º—É...

üéØ –§–ò–ù–ê–õ–¨–ù–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢:
# –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç –≤ –°–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏...

üîß –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ù–´–ï –ò–ù–°–¢–†–£–ú–ï–ù–¢–´:
   - analyze_text

üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –†–ê–ë–û–¢–´ –ò–ù–°–¢–†–£–ú–ï–ù–¢–û–í:
   analyze_text: üìä –ê–ù–ê–õ–ò–ó –¢–ï–ö–°–¢–ê:
   ‚è∞ –í—Ä–µ–º—è –∞–Ω–∞–ª–∏–∑–∞: 2025-08-22 12:17:06
   üìù –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–æ–≤: 713
   üìÑ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π: 33

‚úÖ –ú—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞ —Ä–∞–±–æ—Ç—É!
üìà –¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ Langfuse
```

### –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≤—ã–≤–æ–¥–∞

- **üîÑ –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å** - –≤–∏–¥–Ω–æ, –∫–∞–∫ –∫—Ä–∏—Ç–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É
- **üìä –î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞** - –∫–∞–∂–¥—ã–π —à–∞–≥ —Ä–∞–±–æ—Ç—ã –∞–≥–µ–Ω—Ç–æ–≤ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è
- **üéØ –ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ
- **üìà Langfuse –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ GigaChat
```
‚ùå –û—à–∏–±–∫–∞: (URL('https://gigachat.devices.sberbank.ru/api/v1/chat/completions'), 401, b'{"status":401,"message":"Unauthorized"}')
```
**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å API –∫–ª—é—á–∞ –≤ `config.env`

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
```
‚ùå –û—à–∏–±–∫–∞: GIGACHAT_API_KEY –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
```
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `config.env` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª—é—á–∏

### –ü—Ä–æ–±–ª–µ–º–∞: Langfuse –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
```
‚ö†Ô∏è Langfuse —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞ (–æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
```
**–†–µ—à–µ–Ω–∏–µ:** 
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Langfuse –∑–∞–ø—É—â–µ–Ω: `docker compose up` –≤ –ø–∞–ø–∫–µ langfuse
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `config.env`
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `LANGFUSE_HOST=http://localhost:3000`
4. –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∏—Å—Ç–µ–º—É –±–µ–∑ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –ü—Ä–æ–±–ª–µ–º–∞: Docker –Ω–µ –Ω–∞–π–¥–µ–Ω
```
‚ùå docker: command not found
```
**–†–µ—à–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Docker —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞: https://docker.com/get-started

### –ü—Ä–æ–±–ª–µ–º–∞: –†–µ–¥–∞–∫—Ç–æ—Ä –Ω–µ –≤–∏–¥–∏—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
```
ModuleNotFoundError: No module named 'dotenv'
```
**–†–µ—à–µ–Ω–∏–µ:** –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ Python –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä –≤ VS Code
